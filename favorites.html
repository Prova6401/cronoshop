<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Preferiti</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    .fav-list {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin: 2rem 0;
    }
    .fav-card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 8px #0001;
      padding: 1.2rem 1rem;
      text-align: center;
      max-width: 220px;
      min-width: 180px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .fav-card img {
      width: 90px;
      height: 90px;
      object-fit: contain;
      border-radius: 10px;
      background: #f5f5f7;
      margin-bottom: 0.7rem;
    }
    .fav-card h3 {
      font-size: 1.05rem;
      margin-bottom: 0.4rem;
      color: #0071e3;
    }
    .fav-card .price {
      font-size: 1.05rem;
      font-weight: 600;
      color: #222;
      margin-bottom: 0.5rem;
    }
    .fav-card .remove-fav-btn {
      background: #ff3b30;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.4rem 1rem;
      font-weight: 600;
      font-size: 0.95rem;
      margin-top: 0.5rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .fav-card .remove-fav-btn:hover {
      background: #d32f2f;
    }
  </style>
</head>
<body>
  <header>
    <h1>I tuoi preferiti</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="products.html">Prodotti</a>
      <a href="groups.html">Gruppi</a>
      <a href="come-funziona.html">Come Funziona</a>
      <a href="faq.html">FAQ</a>
      <a href="favorites.html">Preferiti</a>
      <a href="account.html">Area Personale</a>
      <a href="cart.html">Carrello</a>
    </nav>
  </header>
  <main>
    <div id="fav-products" class="fav-list"></div>
    <p id="empty-fav-msg" style="text-align:center;color:#888;margin-top:2rem;display:none;">Nessun prodotto nei preferiti.</p>
  </main>
  <script>
    // Usa la stessa lista prodotti del carrello (puoi importarla o copiarla qui)
    const prodotti = [
      // ... copia qui l'array prodotti come in cart.html ...
    ];

    function getFavorites() {
      return JSON.parse(localStorage.getItem('cronoshop_favorites') || '[]');
    }
    function setFavorites(favs) {
      localStorage.setItem('cronoshop_favorites', JSON.stringify(favs));
    }

    function renderFavorites() {
      const favs = getFavorites();
      const favProducts = prodotti.filter(p => favs.includes(p.id));
      const container = document.getElementById('fav-products');
      const emptyMsg = document.getElementById('empty-fav-msg');
      if (favProducts.length === 0) {
        container.innerHTML = '';
        emptyMsg.style.display = 'block';
        return;
      }
      emptyMsg.style.display = 'none';
      container.innerHTML = favProducts.map(prod => `
        <div class="fav-card">
          <img src="${prod.img}" alt="${prod.nome}">
          <h3>${prod.nome}</h3>
          <div class="price">${prod.prezzo}</div>
          <a href="${prod.link}" target="_blank" style="text-decoration:none;">
            <button style="background:#ff9900;color:#fff;border:none;border-radius:8px;padding:0.5rem 1rem;font-weight:600;font-size:1rem;margin-bottom:0.5rem;cursor:pointer;">Compra su Amazon</button>
          </a>
          <button class="remove-fav-btn" data-id="${prod.id}">Rimuovi</button>
        </div>
      `).join('');
    }

    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('remove-fav-btn')) {
        const id = e.target.getAttribute('data-id');
        let favs = getFavorites();
        favs = favs.filter(pid => pid !== id);
        setFavorites(favs);
        renderFavorites();
      }
    });

    // Inizializza
    renderFavorites();
  </script>
</body>
</html>
